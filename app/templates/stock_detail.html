{% extends "base.html" %}

{% block content %}
<div class="stock-detail-header">
    <h1 id="stock-name">{{ symbol }}</h1>
    <div class="stock-price-container">
        <span id="stock-price" class="price">--</span>
        <span id="stock-change" class="change">--</span>
    </div>
    <button id="add-to-watchlist" class="btn btn-primary">
        <i class="fas fa-star"></i> <span id="watchlist-text">Add to Watchlist</span>
    </button>
</div>

<div class="loading-spinner" id="stock-detail-loader">
    <i class="fas fa-spinner fa-spin"></i>
</div>

<div id="stock-content" class="hidden">
    <div class="stock-chart-tabs">
        <button class="tab-btn active" data-timeframe="1d">1D</button>
        <button class="tab-btn" data-timeframe="1w">1W</button>
        <button class="tab-btn" data-timeframe="1m">1M</button>
        <button class="tab-btn" data-timeframe="3m">3M</button>
        <button class="tab-btn" data-timeframe="1y">1Y</button>
        <button class="tab-btn" data-timeframe="5y">5Y</button>
    </div>

    <div class="chart-type-toggle">
        <button class="chart-type-btn active" data-chart-type="line">Line</button>
        <button class="chart-type-btn" data-chart-type="candle">Candlestick</button>
        <button class="chart-type-btn" data-chart-type="volume">Volume</button>
    </div>

    <div id="stock-chart"></div>

    <div class="stock-details-grid">
        <div class="stock-overview">
            <h2>Company Overview</h2>
            <div class="loading-spinner" id="overview-loader">
                <i class="fas fa-spinner fa-spin"></i>
            </div>
            <div id="overview-content" class="hidden">
                <table class="info-table">
                    <tr>
                        <th>Sector</th>
                        <td id="sector">--</td>
                    </tr>
                    <tr>
                        <th>Industry</th>
                        <td id="industry">--</td>
                    </tr>
                    <tr>
                        <th>Market Cap</th>
                        <td id="market-cap">--</td>
                    </tr>
                    <tr>
                        <th>P/E Ratio</th>
                        <td id="pe-ratio">--</td>
                    </tr>
                    <tr>
                        <th>Dividend Yield</th>
                        <td id="dividend-yield">--</td>
                    </tr>
                    <tr>
                        <th>52-Week High</th>
                        <td id="52-week-high">--</td>
                    </tr>
                    <tr>
                        <th>52-Week Low</th>
                        <td id="52-week-low">--</td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="stock-summary">
            <h2>Trading Summary</h2>
            <div class="loading-spinner" id="summary-loader">
                <i class="fas fa-spinner fa-spin"></i>
            </div>
            <div id="summary-content" class="hidden">
                <div class="summary-grid">
                    <div class="summary-item">
                        <span class="summary-label">Open</span>
                        <span id="open-price" class="summary-value">--</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">High</span>
                        <span id="high-price" class="summary-value">--</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Low</span>
                        <span id="low-price" class="summary-value">--</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Close</span>
                        <span id="close-price" class="summary-value">--</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Volume</span>
                        <span id="volume" class="summary-value">--</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Avg Volume</span>
                        <span id="avg-volume" class="summary-value">--</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="historical-data">
        <h2>Historical Data</h2>
        <div class="loading-spinner" id="historical-loader">
            <i class="fas fa-spinner fa-spin"></i>
        </div>
        <div class="table-container" id="historical-content">
            <table class="data-table" id="historical-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Open</th>
                        <th>High</th>
                        <th>Low</th>
                        <th>Close</th>
                        <th>Volume</th>
                        <th>Change</th>
                    </tr>
                </thead>
                <tbody id="historical-tbody">
                    <!-- Historical data will be inserted here -->
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    const STOCK_SYMBOL = "{{ symbol }}";
</script>
<script src="{{ url_for('static', path='/js/stock-detail.js') }}"></script>
{% endblock %}